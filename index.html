<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <title>PCè¨ºæ–­ï½œ2æŠã§ç”¨é€”åˆ¥ãŠã™ã™ã‚ã‚¹ãƒšãƒƒã‚¯ãŒã™ãåˆ†ã‹ã‚‹ï¼ˆã‚²ãƒ¼ãƒ /ä»•äº‹/ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ï¼‰</title>
  <meta name="description" content="PCé¸ã³ã§è¿·ã†äººå‘ã‘ã€‚2æŠã®è³ªå•ã«ç­”ãˆã‚‹ã ã‘ã§ã€ã‚ãªãŸã«åˆã†PCã‚¿ã‚¤ãƒ—ã¨æ¨å¥¨ã‚¹ãƒšãƒƒã‚¯ï¼ˆCPU/GPU/ãƒ¡ãƒ¢ãƒª/SSDã®ç›®å®‰ï¼‰ã‚’çŸ­ãæç¤ºã—ã¾ã™ã€‚ã‚²ãƒ¼ãƒ /é…ä¿¡ãƒ»ä»•äº‹/å­¦ç¿’ãƒ»åˆ¶ä½œ/ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ãƒ»è‡ªä½œæ´¾ã¾ã§å¯¾å¿œã€‚" />

  <!-- Canonicalï¼ˆã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³ãŒæœ¬å‘½ï¼‰ -->
  <link rel="canonical" href="https://pc-diagnosis.shorts-ranking.com/" />

  <!-- Basic SEO -->
  <meta name="robots" content="index,follow" />
  <meta name="theme-color" content="#2563eb" />

  <!-- OGP (X / SNS) -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="PCè¨ºæ–­" />
  <meta property="og:title" content="PCè¨ºæ–­ï½œ2æŠã§ãŠã™ã™ã‚ã‚¹ãƒšãƒƒã‚¯ãŒã™ãåˆ†ã‹ã‚‹" />
  <meta property="og:description" content="PCé¸ã³ã§è¿·ã†äººå‘ã‘ã€‚2æŠã§é€²ã‚ã‚‹ã ã‘ã§ã€ç”¨é€”ã«åˆã†PCã‚¿ã‚¤ãƒ—ã¨æ¨å¥¨ã‚¹ãƒšãƒƒã‚¯ã®æ–¹å‘æ€§ã‚’çŸ­ãæç¤ºã—ã¾ã™ã€‚" />
  <meta property="og:url" content="https://pc-diagnosis.shorts-ranking.com/" />
  <!-- OGPç”»åƒã¯å¾Œã§è¿½åŠ ã§OKï¼šç”¨æ„ã§ããŸã‚‰ã“ã“ã«å·®ã—æ›¿ãˆ -->
  <!-- <meta property="og:image" content="https://pc-diagnosis.shorts-ranking.com/ogp.png" /> -->

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="PCè¨ºæ–­ï½œ2æŠã§ãŠã™ã™ã‚ã‚¹ãƒšãƒƒã‚¯ãŒã™ãåˆ†ã‹ã‚‹" />
  <meta name="twitter:description" content="PCé¸ã³ã®è¿·ã„ã‚’æ¸›ã‚‰ã™ã€‚2æŠã§é€²ã‚€ã ã‘ã®PCè¨ºæ–­ã€‚" />

  <!-- Faviconï¼ˆæ—¢å­˜ã®ã¾ã¾ã§OKï¼‰ -->
  <link rel="icon" href="./favicon.ico" sizes="any">
  <link rel="icon" type="image/png" href="./favicon.png" sizes="48x48">
  <link rel="apple-touch-icon" href="./favicon.png">

  <!-- CSSï¼ˆåˆ†é›¢æ¸ˆã¿å‰æï¼‰ -->
  <link rel="stylesheet" href="./styles.css">
</head>

<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div>
          <h1>PCè¨ºæ–­ğŸ’»</h1>
          <p class="sub">2æŠã§ã‚µã‚¯ãƒƒã¨ã€‚è¿·ã„ã‚’æ¸›ã‚‰ã—ã¦ã€å¾Œæ‚”ã—ã«ãã„æ–¹å‘æ€§ã‚’å‡ºã—ã¾ã™ã€‚</p>
        </div>
      </div>
    </header>

    <section class="card" aria-live="polite">
      <div class="cardHead">
        <div class="pillRow">
          <div class="pill" id="pillLeft">2æŠã§é€²ã¿ã¾ã™</div>
          <div class="pill" id="pillRight"><span class="qno" id="qno">Q1/6</span></div>
        </div>
        <div class="progress" aria-label="é€²æ—"><div class="bar" id="bar"></div></div>
      </div>
      <div class="cardBody" id="app"></div>
    </section>

    <div class="footerNote">
      â€»ä¾¡æ ¼ãƒ»åœ¨åº«ã¯å¤‰å‹•ã—ã¾ã™ã€‚ã“ã“ã§ã¯ã€Œç”¨é€”ã«åˆã†æ–¹å‘æ€§ã€ã‚’çŸ­ãæç¤ºã—ã¾ã™ã€‚
    </div>
  </div>

<script>
(() => {
  "use strict";

  const STORAGE_KEY = "pc_diagnosis_v1_state";

  const LINKS_BASE = {
  mouse:   { label: "ãƒã‚¦ã‚¹ã§æ¢ã™",   buildUrl: (q) => `https://www.mouse-jp.co.jp/store/g/ggaming/?search=${encodeURIComponent(q)}` },
  dospara: { label: "ãƒ‰ã‚¹ãƒ‘ãƒ©ã§æ¢ã™", buildUrl: (q) => `https://www.dospara.co.jp/search?keyword=${encodeURIComponent(q)}` },
  amazon:  { label: "Amazonã§æ¢ã™",   buildUrl: (q) => `https://www.amazon.co.jp/s?k=${encodeURIComponent(q)}` }
  };

  const TYPES = {
    game: {
      name: "ã‚²ãƒ¼ãƒ ãƒ»é…ä¿¡å‘ã‘",
      blurb: "æ€§èƒ½ä¸è¶³ã®å¾Œæ‚”ã‚’é¿ã‘ã‚‹ã‚¿ã‚¤ãƒ—ã€‚GPUã¨å†·å´ã‚’æœ€å„ªå…ˆã«ã€‚",
      conclusion: "çµè«–ï¼šã‚²ãƒ¼ãƒ /é…ä¿¡ãªã‚‰ã€ŒGPUå„ªå…ˆã€ã€‚è¿·ã£ãŸã‚‰ãƒ•ãƒ«HDã§å®‰å®šã‚’åŸºæº–ã«æ±ºã‚ã‚‹ã€‚",
      must: "å‰Šã‚‹ãªï¼šGPUã¨å†·å´ï¼ˆç­ä½“/æ’ç†±ï¼‰ã€‚ã“ã“ãŒå¼±ã„ã¨æº€è¶³åº¦ãŒè½ã¡ã‚„ã™ã„ã€‚",
      okToCut: "å‰Šã£ã¦OKï¼šã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¯å¾Œã‹ã‚‰å¢—è¨­ã—ã‚„ã™ã„ï¼ˆã¾ãš512GBã€œã§é–‹å§‹å¯èƒ½ï¼‰ã€‚",
      specs: [
        "CPUï¼šCore i5 / Ryzen 5 ä»¥ä¸Šï¼ˆæ–°ã—ã‚ï¼‰",
        "GPUï¼šãƒ•ãƒ«HDãªã‚‰ãƒŸãƒ‰ãƒ«å¸¯ä»¥ä¸Šï¼ˆç”¨é€”ã§ä¸Šä¸‹ï¼‰",
        "ãƒ¡ãƒ¢ãƒªï¼š16GBï¼ˆä½™è£•ãªã‚‰32GBï¼‰",
        "SSDï¼š512GBä»¥ä¸Šï¼ˆã‚²ãƒ¼ãƒ å¤šã„ãªã‚‰1TBï¼‰"
      ]
    },
    creator: {
      name: "åˆ¶ä½œãƒ»ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–å‘ã‘",
      blurb: "å¾…ã¡æ™‚é–“ã‚’æ¸›ã‚‰ã™æŠ•è³‡ãŒåŠ¹ãã‚¿ã‚¤ãƒ—ã€‚RAMã¨SSDåšã‚ãŒæ­£ç¾©ã€‚",
      conclusion: "çµè«–ï¼šåˆ¶ä½œã¯ã€ŒRAMã¨SSDã€ãŒåŠ¹ãã€‚æ™‚é–“ã‚’è²·ã†ã¤ã‚‚ã‚Šã§ä¸Šä½å¯„ã›ãŒå›åã—ã‚„ã™ã„ã€‚",
      must: "å‰Šã‚‹ãªï¼šãƒ¡ãƒ¢ãƒªï¼ˆåŸºæœ¬32GBç›®å®‰ï¼‰ã€‚ä¸è¶³ã™ã‚‹ã¨ä½œæ¥­ãŒè©°ã¾ã‚Šã‚„ã™ã„ã€‚",
      okToCut: "å‰Šã£ã¦OKï¼šç”»é¢ã‚µã‚¤ã‚ºã¯å¤–éƒ¨ãƒ¢ãƒ‹ã‚¿ãƒ¼ã§è§£æ±ºã§ãã‚‹ï¼ˆç§»å‹•é‡è¦–ãªã‚‰å°ã•ã‚ã§ã‚‚OKï¼‰ã€‚",
      specs: [
        "CPUï¼šCore i7 / Ryzen 7 ä»¥ä¸Šã‚’åŸºæœ¬ï¼ˆç”¨é€”ã§èª¿æ•´ï¼‰",
        "ãƒ¡ãƒ¢ãƒªï¼š32GBæ¨å¥¨ï¼ˆãƒ©ã‚¤ãƒˆãªã‚‰16GBã§ã‚‚å¯ï¼‰",
        "SSDï¼š1TBæ¨å¥¨ï¼ˆç´ æã‚’æ‰±ã†ãªã‚‰ä½™è£•ï¼‰",
        "GPUï¼šå¿…è¦ãªäººã¯ä¸­ã€œä¸Šä½ï¼ˆå‹•ç”»/3D/ç”ŸæˆAIã§å¤‰å‹•ï¼‰"
      ]
    },
    biz: {
      name: "ä»•äº‹ãƒ»å­¦ç¿’ï¼ˆä¸‡èƒ½ï¼‰å‘ã‘",
      blurb: "å¤±æ•—ã—ã«ãã„å®‰å…¨ãƒ«ãƒ¼ãƒˆã€‚è»½ã•/å®‰å®š/ãƒãƒƒãƒ†ãƒªãƒ¼é‡è¦–ã€‚",
      conclusion: "çµè«–ï¼šè¿·ã£ãŸã‚‰ä¸‡èƒ½ã‚¿ã‚¤ãƒ—ã€‚RAM16GB/SSD512GBã‚’æº€ãŸã›ã°å¤±æ•—ã—ã«ãã„ã€‚",
      must: "å‰Šã‚‹ãªï¼šãƒ¡ãƒ¢ãƒª16GBï¼ˆæœ€ä½ãƒ©ã‚¤ãƒ³ï¼‰ã€‚ä½“æ„Ÿé€Ÿåº¦ã¨å¯¿å‘½ã«ç›´çµã—ã‚„ã™ã„ã€‚",
      okToCut: "å‰Šã£ã¦OKï¼šCPUã¯ãƒŸãƒ‰ãƒ«å¸¯ã§ååˆ†ãªã“ã¨ãŒå¤šã„ï¼ˆä¸–ä»£ã®æ–°ã—ã•å„ªå…ˆï¼‰ã€‚",
      specs: [
        "CPUï¼šCore i5 / Ryzen 5 ä»¥ä¸Šï¼ˆæ–°ã—ã‚ï¼‰",
        "ãƒ¡ãƒ¢ãƒªï¼š16GBæ¨å¥¨ï¼ˆæœ€ä½ã§ã‚‚8GBã¯é¿ã‘ãŸã„ï¼‰",
        "SSDï¼š512GBæ¨å¥¨ï¼ˆæœ€ä½ã§ã‚‚256GBä»¥ä¸Šï¼‰",
        "é‡é‡ï¼šç›®å®‰1.3kgå‰å¾Œï¼ˆæ¯æ—¥æŒã¤ãªã‚‰ï¼‰"
      ]
    },
    build: {
      name: "è‡ªä½œãƒ»ã“ã ã‚ã‚Šæ´¾",
      blurb: "æ§‹æˆã‚’è€ƒãˆã‚‹ã®ãŒæ¥½ã—ã„ã‚¿ã‚¤ãƒ—ã€‚ã¾ãšã¯BTOãƒ™ãƒ¼ã‚¹ã‚‚ç¾å®Ÿçš„ã€‚",
      conclusion: "çµè«–ï¼šè¿·ã†ãªã‚‰ã€ŒBTOãƒ™ãƒ¼ã‚¹â†’å¾Œã§å¢—è¨­ã€ãŒæœ€çŸ­ã€‚æœ€åˆã‹ã‚‰å®Œç’§ã‚’ç‹™ã‚ãªã„ã€‚",
      must: "å‰Šã‚‹ãªï¼šé›»æº/å†·å´ã€‚ã“ã“ã‚’ã‚±ãƒã‚‹ã¨ä¸å®‰å®šãƒ»å¯¿å‘½ã«éŸ¿ãã‚„ã™ã„ã€‚",
      okToCut: "å‰Šã£ã¦OKï¼šã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸/ãƒ¡ãƒ¢ãƒªã¯æ®µéšå¢—è¨­ã§OKï¼ˆå¿…è¦æœ€å°ã‹ã‚‰å§‹ã‚ã‚‰ã‚Œã‚‹ï¼‰ã€‚",
      specs: [
        "äºˆç®—é…åˆ†ã®å‹ï¼šGPU(40-55%) / CPU(15-25%) / ãã®ä»–",
        "ãƒ¡ãƒ¢ãƒªï¼š16GBã€œï¼ˆç”¨é€”ã§32GBï¼‰",
        "SSDï¼š1TBã‚ã‚‹ã¨å®‰å¿ƒï¼ˆå¢—è¨­å‰æã§ã‚‚OKï¼‰",
        "OS/å‘¨è¾ºæ©Ÿå™¨ï¼šæ„å¤–ã¨ç·é¡ã«åŠ¹ãã®ã§æ³¨æ„"
      ]
    }
  };

  const QUESTIONS = [
    {
      key: "purpose",
      title: "ä¸€ç•ªè¿‘ã„ã®ã¯ã©ã£ã¡ï¼Ÿ",
      hint: "ã“ã“ã ã‘ç›´æ„Ÿã§OKã§ã™ã€‚",
      a: { label: "ã‚²ãƒ¼ãƒ ãƒ»é…ä¿¡ãƒ»é‡ãŸã„ä½œæ¥­ãŒã—ãŸã„", add: { game: 3, build: 1 } },
      b: { label: "ä»•äº‹ãƒ»å­¦ç¿’ãƒ»æ™®æ®µä½¿ã„ãŒä¸­å¿ƒ", add: { biz: 3, creator: 1 } }
    },
    {
      key: "mobility",
      title: "ä½¿ã†ã‚·ãƒ¼ãƒ³ã¯ï¼Ÿ",
      hint: "æŒã¡é‹ã³é »åº¦ã§æœ€é©è§£ãŒå¤‰ã‚ã‚Šã¾ã™ã€‚",
      a: { label: "å¤–ã«æŒã¡å‡ºã™ã“ã¨ãŒå¤šã„", add: { biz: 2, creator: 1 } },
      b: { label: "å®¶ã§ä½¿ã†ã“ã¨ãŒå¤šã„", add: { game: 2, build: 1, creator: 1 } }
    },
    {
      key: "budget",
      title: "ä»Šã®æ°—æŒã¡ã«è¿‘ã„ã®ã¯ï¼Ÿ",
      hint: "â€œå¾Œæ‚”ã—ãªã„â€ã»ã†ã‚’é¸ã‚“ã§OKã€‚",
      a: { label: "ã§ãã‚Œã°å®‰ãæ¸ˆã¾ã›ãŸã„", add: { biz: 2, build: 1 } },
      b: { label: "é•·ãå¿«é©ã«ä½¿ã„ãŸã„", add: { creator: 2, game: 1, biz: 1 } }
    },
    {
      key: "anxiety",
      title: "ã©ã£ã¡ã®ä¸å®‰ãŒå¼·ã„ï¼Ÿ",
      hint: "ã‚ãªãŸã®â€œåœ°é›·â€ã‚’é¿ã‘ã¾ã™ã€‚",
      a: { label: "éŸ³ãƒ»ç†±ãƒ»ãƒãƒƒãƒ†ãƒªãƒ¼ãŒä¸å®‰", add: { biz: 2, creator: 1 } },
      b: { label: "æ€§èƒ½ä¸è¶³ã§å¾Œæ‚”ã—ãã†", add: { game: 2, creator: 1, build: 1 } }
    },
    {
      key: "knowledge",
      title: "PCã®çŸ¥è­˜ã¯ï¼Ÿ",
      hint: "åˆ†ã‹ã‚‰ãªã„äººã»ã©ã€å¤±æ•—ã—ã«ãã„æ–¹å‘ã«å¯„ã›ã¾ã™ã€‚",
      a: { label: "æ­£ç›´ã‚ˆãåˆ†ã‹ã‚‰ãªã„ï¼ˆãŠã¾ã‹ã›ï¼‰", add: { biz: 2, creator: 1, game: 1, build: -1 } },
      b: { label: "å¤šå°‘ã¯åˆ†ã‹ã‚‹ãƒ»èˆˆå‘³ã‚ã‚‹", add: { build: 3, game: 1, creator: 1 } }
    },
    {
      key: "buyMode",
      title: "è³¼å…¥ã‚¹ã‚¿ã‚¤ãƒ«ã¯ï¼Ÿ",
      hint: "çµæœã®æ³¨æ„ç‚¹ã¨å°ç·šãŒå¤‰ã‚ã‚Šã¾ã™ã€‚",
      a: { label: "æ–°å“ãŒã„ã„ï¼ˆå®‰å¿ƒé‡è¦–ï¼‰", add: { biz: 1, game: 1, creator: 1, build: 1 } },
      b: { label: "ä¸­å¤ã§ã‚‚OKï¼ˆå®‰ã•é‡è¦–ï¼‰", add: { biz: 1, game: 1, creator: 1, build: 1 } }
    }
  ];

  const dom = {
    app: document.getElementById("app"),
    bar: document.getElementById("bar"),
    qno: document.getElementById("qno"),
    pillLeft: document.getElementById("pillLeft"),
  };

  const state = loadState() || {
    step: 0,
    answers: [],
    scores: { game: 0, creator: 0, biz: 0, build: 0 },
    buyMode: "new"
  };

  function saveState(){ try { sessionStorage.setItem(STORAGE_KEY, JSON.stringify(state)); } catch(e) {} }
  function loadState(){
    try {
      const raw = sessionStorage.getItem(STORAGE_KEY);
      if (!raw) return null;
      const obj = JSON.parse(raw);
      if (!obj || typeof obj.step !== "number") return null;
      return obj;
    } catch(e){ return null; }
  }
  function clearState(){ try { sessionStorage.removeItem(STORAGE_KEY); } catch(e) {} }

  function clamp(n,min,max){ return Math.max(min, Math.min(max,n)); }
  function escapeHtml(str){
    return String(str)
      .replaceAll("&","&amp;")
      .replaceAll("<","&lt;")
      .replaceAll(">","&gt;")
      .replaceAll('"',"&quot;")
      .replaceAll("'","&#39;");
  }

  function applyAdd(addObj){
    for (const k of Object.keys(state.scores)) {
      const v = (addObj && typeof addObj[k] === "number") ? addObj[k] : 0;
      state.scores[k] += v;
    }
  }

  function recalcAll(){
    state.scores = { game: 0, creator: 0, biz: 0, build: 0 };
    state.buyMode = "new";
    for (const ans of state.answers) {
      const q = QUESTIONS[ans.qIndex];
      const picked = (ans.choice === "a") ? q.a : q.b;
      if (q.key === "buyMode") state.buyMode = (ans.choice === "b") ? "used" : "new";
      applyAdd(picked.add);
    }
  }

  function pickResultType(){
    const order = ["biz", "creator", "game", "build"];
    let best = -Infinity;
    for (const k of Object.keys(state.scores)) best = Math.max(best, state.scores[k]);
    const tied = Object.keys(state.scores).filter(k => state.scores[k] === best);
    for (const k of order) if (tied.includes(k)) return k;
    return order[0];
  }

  function buildLinks(typeKey){
  const used = state.buyMode === "used";

  // ã‚¿ã‚¤ãƒ—åˆ¥ï¼šæ¤œç´¢ã‚¯ã‚¨ãƒªï¼ˆæœ€å°ã§åŠ¹ãï¼‰
  const qMap = {
    game:    used ? "ã‚²ãƒ¼ãƒŸãƒ³ã‚°PC ä¸­å¤ RTX 4060" : "ã‚²ãƒ¼ãƒŸãƒ³ã‚°PC RTX 4060",
    creator: used ? "ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼PC ä¸­å¤ 32GB 1TB" : "ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼PC 32GB 1TB",
    biz:     used ? "ãƒãƒ¼ãƒˆãƒ‘ã‚½ã‚³ãƒ³ ä¸­å¤ 16GB 512GB" : "ãƒãƒ¼ãƒˆãƒ‘ã‚½ã‚³ãƒ³ 16GB 512GB",
    build:   used ? "BTO ä¸­å¤ RTX 4060" : "BTO RTX 4060"
  };

  const q = qMap[typeKey] || (used ? "ãƒ‘ã‚½ã‚³ãƒ³ ä¸­å¤" : "ãƒ‘ã‚½ã‚³ãƒ³");

  return [
    { label: LINKS_BASE.mouse.label,   url: LINKS_BASE.mouse.buildUrl(q) },
    { label: LINKS_BASE.dospara.label, url: LINKS_BASE.dospara.buildUrl(q) },
    { label: used ? "Amazonï¼ˆä¸­å¤ã‚‚å«ã‚ã¦ï¼‰" : LINKS_BASE.amazon.label, url: LINKS_BASE.amazon.buildUrl(q) }
  ];
  }

  function selectThenChoose(btnEl, choice){
    try { btnEl.classList.add("selected"); } catch(e) {}
    setTimeout(() => choose(choice), 90);
  }

  function buildCopyText(typeKey){
    const t = TYPES[typeKey];
    const buyModeText = (state.buyMode === "used") ? "ä¸­å¤OKï¼ˆå®‰ã•é‡è¦–ï¼‰" : "æ–°å“ï¼ˆå®‰å¿ƒé‡è¦–ï¼‰";
    const lines = [];
    lines.push("ã€PCè¨ºæ–­ çµæœã€‘");
    lines.push(`ã‚¿ã‚¤ãƒ—ï¼š${t.name}`);
    lines.push(`è³¼å…¥ã‚¹ã‚¿ã‚¤ãƒ«ï¼š${buyModeText}`);
    lines.push("");
    lines.push("â–  çµè«–");
    lines.push(t.conclusion);
    lines.push(t.must);
    lines.push(t.okToCut);
    lines.push("");
    lines.push("â–  æ¨å¥¨ã‚¹ãƒšãƒƒã‚¯ï¼ˆç›®å®‰ï¼‰");
    for (const s of t.specs) lines.push(`- ${s}`);
    return lines.join("\n");
  }

  async function copyResultText(typeKey){
    const text = buildCopyText(typeKey);
    try {
      await navigator.clipboard.writeText(text);
      const old = dom.pillLeft.textContent;
      dom.pillLeft.textContent = "ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ";
      setTimeout(() => (dom.pillLeft.textContent = old), 1200);
    } catch (e) {
      window.prompt("ã‚³ãƒ”ãƒ¼ã§ããªã„ç’°å¢ƒã§ã™ã€‚ä¸‹ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚", text);
    }
  }

  function render(){
    const total = QUESTIONS.length;
    const isDone = state.step >= total;
    const pct = clamp(Math.round((state.step / total) * 100), 0, 100);

    dom.bar.style.width = (isDone ? 100 : pct) + "%";
    dom.qno.textContent = isDone ? "çµæœ" : `Q${state.step + 1}/${total}`;
    dom.pillLeft.textContent = isDone ? "ã‚ãªãŸã®ãŠã™ã™ã‚" : "2æŠã§é€²ã¿ã¾ã™";

    if (!isDone) renderQuestion();
    else renderResult();

    saveState();
  }

  function renderQuestion(){
    const q = QUESTIONS[state.step];

    dom.app.innerHTML = `
      <div class="fade">
        <div class="kicker">${escapeHtml(q.hint || "")}</div>
        <h2>${escapeHtml(q.title)}</h2>

        <div class="grid2">
          <button class="btn choice" id="btnA">${escapeHtml(q.a.label)}</button>
          <button class="btn choice" id="btnB">${escapeHtml(q.b.label)}</button>
        </div>

        <div class="sep"></div>

        <div class="row">
          <button class="btn small ghost" id="btnBack" ${state.step === 0 ? "disabled" : ""}>æˆ»ã‚‹</button>
          <button class="btn small ghost" id="btnReset">æœ€åˆã‹ã‚‰</button>
        </div>

        <div class="footerNote" style="margin-top:10px;">
          è¿·ã£ãŸã‚‰ã€Œå¾Œæ‚”ã—ãªã„æ–¹ã€ã‚’é¸ã‚“ã§OKã€‚
        </div>
      </div>
    `;

    const btnA = document.getElementById("btnA");
    const btnB = document.getElementById("btnB");
    btnA.onclick = () => selectThenChoose(btnA, "a");
    btnB.onclick = () => selectThenChoose(btnB, "b");

    document.getElementById("btnBack").onclick = () => back();
    document.getElementById("btnReset").onclick = () => resetAll();

    window.onkeydown = (e) => {
      if (e.key === "ArrowLeft") selectThenChoose(btnA, "a");
      if (e.key === "ArrowRight") selectThenChoose(btnB, "b");
      if (e.key === "Escape") resetAll();
    };
  }

  function renderResult(){
    const key = pickResultType();
    const t = TYPES[key];
    const links = buildLinks(key);
    const buyModeText = (state.buyMode === "used") ? "ä¸­å¤OKï¼ˆå®‰ã•é‡è¦–ï¼‰" : "æ–°å“ï¼ˆå®‰å¿ƒé‡è¦–ï¼‰";

    const cautionUsed = (state.buyMode === "used") ? `
      <div class="sep"></div>
      <div class="muted">
        <div class="danger">ä¸­å¤ã®æ³¨æ„</div>
        <ul>
          <li>OS/ä¸–ä»£ãŒå¤ã„ã¨æ›´æ–°ãƒ»ã‚µãƒãƒ¼ãƒˆé¢ã§ä¸åˆ©ã«ãªã‚ŠãŒã¡</li>
          <li>ãƒãƒƒãƒ†ãƒªãƒ¼/SSDåŠ£åŒ–ã€ä¿è¨¼ã®æœ‰ç„¡ã‚’å¿…ãšç¢ºèª</li>
          <li>æ¥µç«¯ã«å®‰ã„å‡ºå“ã¯ãƒªã‚¹ã‚¯å¢—ï¼ˆè¿”å“å¯/è©•ä¾¡ã‚’é‡è¦–ï¼‰</li>
        </ul>
      </div>
    ` : "";

    dom.app.innerHTML = `
      <div class="fade">
        <div class="titleRow">
          <div>
            <div class="kicker">è¨ºæ–­ã‚¿ã‚¤ãƒ—</div>
            <div class="typeName">${escapeHtml(t.name)}</div>
            <div class="muted" style="margin-top:6px;">${escapeHtml(t.blurb)}</div>
          </div>
          <div class="badge">è³¼å…¥ã‚¹ã‚¿ã‚¤ãƒ«ï¼š<b>${escapeHtml(buyModeText)}</b></div>
        </div>

        <div class="sep"></div>

        <div class="kicker">çµè«–ï¼ˆè¿·ã„ã‚’æ¸›ã‚‰ã™ï¼‰</div>
        <ul>
          <li><b>${escapeHtml(t.conclusion)}</b></li>
          <li>${escapeHtml(t.must)}</li>
          <li>${escapeHtml(t.okToCut)}</li>
        </ul>

        <div class="sep"></div>

        <div class="kicker">æ¨å¥¨ã‚¹ãƒšãƒƒã‚¯ï¼ˆç›®å®‰ï¼‰</div>
        <ul>
          ${t.specs.map(s => `<li>${escapeHtml(s)}</li>`).join("")}
        </ul>

        <div class="sep"></div>

        <div class="kicker">ç›´ãƒªãƒ³ã‚¯</div>
        <div class="links">
          ${links.map(l => `
            <a href="${escapeHtml(l.url)}" target="_blank" rel="noopener">
              <button class="btn small ghost" type="button">${escapeHtml(l.label)}</button>
            </a>
          `).join("")}
        </div>

        ${cautionUsed}

        <div class="sep"></div>

        <div class="row">
          <button class="btn small ghost" id="btnCopy">çµæœã‚’ã‚³ãƒ”ãƒ¼</button>
          <button class="btn small primary" id="btnRestart">ã‚‚ã†ä¸€å›è¨ºæ–­ã™ã‚‹</button>
        </div>


      </div>
    `;

    document.getElementById("btnCopy").onclick = () => copyResultText(key);
    document.getElementById("btnRestart").onclick = () => resetAll();
    document.getElementById("btnClear").onclick = () => { clearState(); resetAll(); };

    window.onkeydown = null;
  }

  function choose(choice){
    const q = QUESTIONS[state.step];
    const picked = (choice === "a") ? q.a : q.b;

    if (q.key === "buyMode") state.buyMode = (choice === "b") ? "used" : "new";

    state.answers.push({ qIndex: state.step, choice });
    applyAdd(picked.add);

    state.step += 1;
    render();
  }

  function back(){
    if (state.step <= 0) return;
    state.step -= 1;
    state.answers.pop();
    recalcAll();
    render();
  }

  function resetAll(){
    state.step = 0;
    state.answers = [];
    state.scores = { game: 0, creator: 0, biz: 0, build: 0 };
    state.buyMode = "new";
    render();
  }

  recalcAll();
  state.step = Math.min(state.step, QUESTIONS.length);
  if (state.answers.length !== state.step) {
    state.answers = state.answers.slice(0, state.step);
    recalcAll();
  }

  render();
})();
</script>
</body>
</html>
